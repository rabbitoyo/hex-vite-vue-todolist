import{r as f,c,o as u,b as T,a as t,v as g,h as _,t as h,n as v,F as L,i as $,j as k,w as x,d as y,u as C,k as w}from"./index--ceUcoME.js";import{a as b}from"./api-Bn8Kxi9S.js";const S={class:"inputBox"},B={__name:"TodoForm",emits:["add-todo"],setup(p,{emit:i}){const s=f(""),n=i,l=()=>{n("add-todo",s.value),s.value=""};return(r,a)=>(u(),c("div",S,[T(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o)},null,512),[[g,s.value]]),t("a",{href:"#",onClick:l},[...a[1]||(a[1]=[t("i",{class:"fa fa-plus"},null,-1)])])]))}},D={class:"todoList_label"},M=["checked"],N={__name:"TodoItem",props:{todo:{type:Object,required:!0}},emits:["remove-todo","update-status"],setup(p,{emit:i}){const s=p,n=i,l=a=>{n("remove-todo",a)},r=_({get:()=>s.todo.status,set:a=>{n("update-status",{id:s.todo.id,status:a})}});return(a,o)=>(u(),c("li",null,[t("label",D,[t("input",{class:"todoList_input",type:"checkbox",checked:r.value,onChange:o[0]||(o[0]=e=>r.value=e.target.checked)},null,40,M),t("span",null,h(s.todo.content),1)]),t("a",{href:"#",onClick:o[1]||(o[1]=e=>l(s.todo.id))},[...o[2]||(o[2]=[t("i",{class:"fa fa-times"},null,-1)])])]))}},O={class:"todoList_list"},R={class:"todoList_tab"},V={class:"todoList_items"},A={class:"todoList_item"},F={class:"todoList_statistics"},I={__name:"TodoList",props:{todos:{type:Array,required:!0}},emits:["remove-todo"],setup(p,{emit:i}){const s=p,n=i,l=f("all"),r=_(()=>{switch(l.value){case"incomplete":return s.todos.filter(o=>!o.status);case"completed":return s.todos.filter(o=>o.status);default:return s.todos}}),a=_(()=>s.todos.filter(o=>!o.status));return(o,e)=>(u(),c("div",O,[t("ul",R,[t("li",null,[t("a",{href:"#",onClick:e[0]||(e[0]=d=>l.value="all"),class:v({active:l.value==="all"})},"全部",2)]),t("li",null,[t("a",{href:"#",onClick:e[1]||(e[1]=d=>l.value="incomplete"),class:v({active:l.value==="incomplete"})},"待完成",2)]),t("li",null,[t("a",{href:"#",onClick:e[2]||(e[2]=d=>l.value="completed"),class:v({active:l.value==="completed"})},"已完成",2)])]),t("div",V,[t("ul",A,[(u(!0),c(L,null,$(r.value,d=>(u(),k(N,{key:d.id,todo:d,onRemoveTodo:e[3]||(e[3]=m=>n("remove-todo",m)),onUpdateStatus:e[4]||(e[4]=m=>n("update-status",m))},null,8,["todo"]))),128))]),t("div",F,[t("p",null,h(a.value.length)+" 個未完成項目",1)])])]))}},P={id:"todoListPage",class:"bg-half"},U={class:"conatiner todoListPage vhContainer"},j={class:"todoList_Content"},q={key:1},J={__name:"TodoListView",setup(p){const i=C(),s=f([{id:1,content:"把冰箱發霉的檸檬拿去丟",status:!1},{id:2,content:"打電話叫媽媽匯款給我",status:!0}]),n=o=>{o.trim()!==""&&s.value.push({id:Date.now(),content:o,status:!1})},l=({id:o,status:e})=>{const d=s.value.find(m=>m.id===o);d&&(d.status=e)},r=o=>{s.value=s.value.filter(e=>e.id!==o)},a=async()=>{try{await b(),alert("登出成功"),document.cookie="vue3-todolist-token=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",document.cookie="vue3-todolist-token=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=localhost",await w(),i.push("/login"),i.push("/login")}catch(o){alert("登出失敗"),console.error(o)}};return(o,e)=>(u(),c("div",P,[t("nav",null,[e[1]||(e[1]=t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1)),t("ul",null,[e[0]||(e[0]=t("li",{class:"todo_sm"},[t("a",{href:"#"},[t("span",null,"王小明的代辦")])],-1)),t("li",null,[t("a",{href:"#loginPage",onClick:x(a,["prevent"])},"登出")])])]),t("div",U,[t("div",j,[y(B,{onAddTodo:n}),s.value.length?(u(),k(I,{key:0,todos:s.value,onRemoveTodo:r,onUpdateStatus:l},null,8,["todos"])):(u(),c("p",q,"尚無代辦事項"))])])]))}};export{J as default};
